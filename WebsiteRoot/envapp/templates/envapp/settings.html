{% include 'envapp/navbar.html' %}
{% load static %}

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Settings - Sustainability App</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body>
    <h1>Settings</h1>
    <p>Update your personal settings.</p>

    {% if messages %}
    {% for message in messages %}
    <p class="success-message">{{ message }}</p>
    {% endfor %}
    {% endif %}

    <form method="post">
        {% csrf_token %}

        <div>
            <label>Display Name</label>
            <input type="text" name="display_name" value="{{ request.user.first_name }}" required>
        </div>

        <div>
            <label>Email Address (Cannot be changed)</label>
            <input type="email" value="{{ request.user.email }}" readonly>
        </div>

        <div>
            <label>New Password (Optional)</label>
            <input type="password" name="password">
        </div>

        <button type="submit">Save Changes</button>
    </form>

    <hr>

    <!-- Delete Account Section -->
    <h2>Delete Account</h2>
    <p>Warning: This action is irreversible. Your account and all related data will be permanently deleted.</p>
    <form method="post" action="{% url 'delete_account' %}">
        {% csrf_token %}
        <button type="submit" class="delete-button">Delete My Account</button>
    </form>

</body>

</html>